{-# LANGUAGE OverloadedStrings #-}

module Contacts where

import Control.Monad.IO.Class
import Data.Time
import MyCrypto
import Nostr.Event
import Nostr.Keys
import Nostr.Network
import Nostr.Profile
import Nostr.RelayPool
import Nostr.Request
import Nostr.Log
import Data.Maybe

savedContacts = catMaybes $ (\p -> decodeHex p >>= parseXOnlyPubKey) <$> pubKeys

pubKeys :: [String]
pubKeys =
  [ "02aaac8883e92694118f0043e57d8119b513ce0ae31b116c851c0e955195f30e",
    "1bc70a0148b3f316da33fe3c89f23e3e71ac4ff998027ec712b905cd24f6a411",
    "f66c55b57b987829e5a3c5c2df0aebc3279a56ce9d41ecbf312bd9b32f250612",
    "6d0dddfbef0274c0b8ee587c1061323db75d50bd7933a70365e7483fd2a45016",
    "75f457569d7027f819de92e8bb13795c0febe9750dc3fb1b5c42aeb502d0841d",
    "8f72da02fbc80380cbd8b03533d5913b2a5c9fabc9c37cfdafc344ec335f5d21",
    "5e653220e624e74c35387b8c26d3f35ffb955bf94235e1e7bc53b2569dd9bd21",
    "c69205cdb39b8c3b8b953c1b6282a49c379b52c369452e5aee9c24ca0b58b32a",
    "50fbd82a5221fd9a4a7c117a7ff47f4ec794e9a35b553fd6edc4bacb685d8131",
    "3013f8b30d44d43506ae456b001881d311ce1bf69864dc74a0c3e16ec7aee832",
    "1a3ab0a32fe5b7764b06c6aad6414ec3514ee1442fc1b8423d7818e9028bd933",
    "6ad3e2a34818b153c81f48c58f44e5199e7b4fc8dbe37810a000dce3c90b7740",
    "9b37d4a2a1cb24652dab5b0aab6b574276507133527a826ae7d20e1ef92d3d41",
    "da27f5dd5068704a520a7dcd61bf004ce00596feb56849756845bb30bf00234c",
    "fa984bd7dbb282f07e16e7ae87b26a2a7b9b90b7246a44771f0cf5ae58018f52",
    "1ae011cb34999af15602a2aa927f32bb92d65f6161ed71abdaa4f50c1257a556",
    "e9d926146f72aa582bd0a84ede374b656d18b3287b2ce274abb12be062441057",
    "8c667c46b4f20670a52cd5cc41b67f13410660fac78604c6006975453ba70f5b",
    "460c25e682fda7832b52d1f22d3d22b3176d972f60dcdc3212ed8c92ef85065c",
    "cbab7074a03bf89c7dd1623e42e65409e3918662af6c65fe2e38c92ff9f0bd61",
    "d830ee7b7c30a364b1244b779afbb4f156733ffb8c87235086e26b0b4e61cd62",
    "27154fb873badf69c3ea83a0da6e65d6a150d2bf8f7320fc3314248d74645c64",
    "000000dd7a2e54c77a521237a516eefb1d41df39047a9c64882d05bc84c9d666",
    "6b9da920c4b6ecbf2c12018a7a2d143b4dfdf9878c3beac69e39bb597841cc6e",
    "f27c6a9d6e2e0e28115104508d097a04750b357a02c1a7e0ce5bb2fc54210470",
    "14c0aae7882730fb0885723a82ec3010ed8ca46eb65f503d24e3dc3ddc45b472",
    "f03df3d4134230420cdf7acbb35f96a2542424246ab052ba24c6fec6a4d4f676",
    "59aa572a2b7d8569ce019a0a0dfa43251fdc2aa8947b0d69b5a5010789d8dd7a",
    "eb2d6b7b9825a1b35b4cd22de54a90abade29d89542a906fd223d4e8cee3b484",
    "be6fd25772d10b35df54c10e573fd3e383d2e8eaa4a0bddf0d5def578cb70897",
    "76dd32f31619b8e35e9f32e015224b633a0df8be8d5613c25b8838a370407698",
    "345f22270195358dc81564a3790c141df689e48ed8c946c6ce910f6f9fd18699",
    "e56509901ced5e39282ae1748e1cf1477beed17f08495d2ad9bc3f7e60d7fb9b",
    "e64c0224682106e49f0c3b67f59d3df9d3efa282c272173acd8ec291f6d5839e",
    "4e050249d143dac893b8d072a328ac3eb9e14218e717a0e6965bb8a28d23d79f",
    "82341f882b6eabcd2ba7f1ef90aad961cf074af15b9ef44a09f9d2a8fbfbe6a2",
    "975b04dcfb3a72dc5bc64f52cf948b73e71e0cee328c956dc0c340796a8ef0a2",
    "8eea02e8912085962a930b28beed2683a988614de9a339750ae0b3061e2c6db1",
    "a3c488ec1906c556aef094f0c4fd8eeb79dd6909badd500a303234f26e33f6bd",
    "c1831fbe2653f76164421d57db6cee38b8cef8ce6771bc65c12f8543de4b39bf",
    "ddf3ee335bd27b9845547436e2202adadda4349f01827476d512091f5406d5cd",
    "a80fc4a78634ee26aabcac951b4cfd7b56ae18babd33c5afdcf6bed6dc80ebd1",
    "b9148b801147ea86609c4e555fe853b0ba8adbd491c6db75373a9260ae8609d2",
    "f5d70542664e65719b55d8d6250b7d51cbbea7711412dbb524108682cbd7f0d4",
    "dd2dbe6b8c09a4abb9eb18fa2ce174c3ebf311d2ce11251487a32bee477844d7",
    "8c07e2316b9d8b5db37b554b3e2d58cc1dc5ff98d21a826dc4a6f895134127d8",
    "ee772a9ec50f3c664ce3583a23d7f9e036d4e353f11a94b2d11113165d3dced8",
    "e7bf8dad360828f0289b7b4bea1a1bd28eb6d4d6522fa17f957e0dfb839ef3db",
    "0e6e0dab0d20d1033ef6f4f902024be3ef8948f1203c47e300b325e21b836ddc",
    "382d893abf7bb83b09fa1e37cc6e71b27a4e46a3fea57463bffc8c812ee697e7",
    "97ca76334c49ef77e3c7819a4b3ba42c9ce1bd4a7cbdfd35a6cefd532f1a4dec"
  ]

-- >>> keys <- generateKeys
-- >>> now <- liftIO getCurrentTime
-- >>> let unsigned = setContacts (zip savedContacts (repeat Nothing)) (xo keys) now
-- >>> unsigned
-- >>> signEvent unsigned (Nostr.Keys.secKey keys) (xo keys)

-- UnsignedEvent {pubKey' = "bfcbee86c4edeaa0d6d81a0b38a8ce06abeea48ec28404b7c6380a4859942a9a", created_at' = 2024-08-24 18:53:05.264004035 UTC, kind' = Contacts, tags' = [PTag (ValidXOnlyPubKey "0ef39551950e1c856c111be30ace13b519817de543008f119426e98388acaa02aae3067d522f550cc2e9226a79d21d408a348939be2bbf72bbd43b4ca45f046a") (Just "") Nothing,PTag (ValidXOnlyPubKey "11a4f624cd05b912c77e0298f94fac713e3ef2893cfe33da16f3b348010ac71bbca873ca5955daa0371c23160ac06d422cfb475d59f0b6ec8b8c6f58fd837c78") (Just "") Nothing,PTag (ValidXOnlyPubKey "1206252fb3d92b31bfec419dce569a27c3eb0adfc2c5a3e52978987bb5556cf64ee9aa910d17acecdc1789b84a907960bd0e38877f01c402003d54cd8ae103e6") (Just "") Nothing,PTag (ValidXOnlyPubKey "1650a4d23f48e76503a73379bd505db73d3261107c58eeb8c07402effbdd0d6df287cba23e8270eb259fce31403b6ffca73a35c82860a407a34f6ebe255f64de") (Just "") Nothing,PTag (ValidXOnlyPubKey "1d84d002b5ae425c1bfbc30d75e9eb0f5c7913bbe892de19f827709d5657f475aaed32a23af27bede5620b0274f6c7205eeeb84a59912ad415af0c4adc657e2b") (Just "") Nothing,PTag (ValidXOnlyPubKey "215d5f33ec44c3affd7cc3c9ab9f5c2a3b91d53335b0d8cb8003c8fb02da728f8afea068d0436401dda33f8095eed7bb8c46e0affa7eefd70bcc71da9f3ab2a2") (Just "") Nothing,PTag (ValidXOnlyPubKey "21bdd99d56b253bce7e13542f95b95fb5ff3d3268c7b38354ce724e62032655e961fb2b0a63e5e6c0a9081d4ec08e07907195dbf616025838c496370aafd106f") (Just "") Nothing,PTag (ValidXOnlyPubKey "2ab3580bca249cee5a2e4569c3529b379ca482621b3c958b3b8c9bb3cd0592c6ec38e4c4d7622ed0639d9521953deb73e862056115a280232052eb8b1771773b") (Just "") Nothing,PTag (ValidXOnlyPubKey "31815d68cbbac4edd63f555ba3e994c74e7ff47f7a117c4a9afd21522ad8fb506c1e0fa0c8ef337194fc0837b6a1eabf40d9149f970fb99ee453d33fd51ccadd") (Just "") Nothing,PTag (ValidXOnlyPubKey "32e8aec76ee1c3a074dc6498f61bce11d38118006b45ae0635d4440db3f81330a8582e835a9f5b26f4eebf52e21950021ac026c119e483f9dfcffe21f5ad72d4") (Just "") Nothing,PTag (ValidXOnlyPubKey "33d98b02e918783d42b8c12f44e14e51c34e41d6aac6064b76b7e52fa3b03a1a466489949b21eed4472f3f0871960ffb3c80779ecb2babdeda41ef91f2e8c40c") (Just "") Nothing,PTag (ValidXOnlyPubKey "40770bc9e3dc00a01078e3dbc84f7b9e19e5448fc5481fc853b11848a3e2d36a225b229cc9d40b1d642118db65a4d1cea10a7aaab924c95594a3b20d3a453b25") (Just "") Nothing,PTag (ValidXOnlyPubKey "413d2df91e0ed2e76a827a523371507642576bab0a5bab2d6524cba1a2d4379b007b9f13a4d4bf5cc1d92236425307db3d1ecd7c699d59ac7614681a49dfe763") (Just "") Nothing,PTag (ValidXOnlyPubKey "4c2300bf30bb4568754968b5fe9605e04c00bf61cd7d0a524a706850ddf527dae4d46c8dd566fc58466474a259789da9153c70775536a56d9c4d76a9c83e95a4") (Just "") Nothing,PTag (ValidXOnlyPubKey "528f0158aef50c1f77446a24b7909b7b2a6ab287aee7167ef082b2dbd74b98fa786fc01c4ed95fa792ffb8697c6304870bd2c8f955d5b75f8c4ceda6a46182da") (Just "") Nothing,PTag (ValidXOnlyPubKey "56a557120cf5a4daab71ed61615fd692bb327f92aaa20256f19a9934cb11e01aea7546caf76310fd490882ba7d9f8d5bf3045fbfccb1f574050f7c2f2809cad3") (Just "") Nothing,PTag (ValidXOnlyPubKey "57104462e02bb1ab74e22c7b28b3186d654b37de4ea8d02b58aa726f1426d9e9a69833f2bc8da01a40504bbf01406885e857962671c600bb7fb3076686af3453") (Just "") Nothing,PTag (ValidXOnlyPubKey "5b0fa73b45756900c60486c7fa600641137fb641ccd52ca57006f2b4467c668c9cff23eefb20134639db59c1fdaa16d0aa133fffc71f183a0d63b621bbe80cde") (Just "") Nothing,PTag (ValidXOnlyPubKey "5c0685ef928ced1232dcdc602f976d17b3223d2df2d1522b83a7fd82e6250c4608e913be4001643b1bc5ae04d764d6e4877961512c17385389c912159fe4d441") (Just "") Nothing,PTag (ValidXOnlyPubKey "61bdf0f92fc9382efe656caf628691e30954e6423e62d17d9cf83ba07470abcb3aa73b140772efb4ac9b6018c67f7c73f01eb8da4fd9270e3ad19bcc6bc8bd25") (Just "") Nothing,PTag (ValidXOnlyPubKey "62cd614e0b6be2865023878cfb3f7356f1b4fb9a774b24b164a3307c7bee30d8c2606a3e1d96c349a55d094ec70e34704e7171d3796af5337a30c3da3df1d8f8") (Just "") Nothing,PTag (ValidXOnlyPubKey "645c64748d241433fc20738fbfd250a1d6656edaa083eac369dfba73b84f152704b267c545e2fa674be691d4e4ac05d66f869192482cab331dc8472bdb8f8f0e") (Just "") Nothing,PTag (ValidXOnlyPubKey "66d6c984bc052d88649c7a0439df411dfbee16a53712527ac7542e7add000000aa377948af65520de0de33f85fd1f2b3eb73a5fcda41c6db2a399a1f27cfaadd") (Just "") Nothing,PTag (ValidXOnlyPubKey "6ecc417859bb399ec6ea3b8c87f9fd4d3b142d7a8a01122cbfecb6c420a99d6bdcbb3fd99f654b213c95f2b50e15b07b0f57b681e74d6b7e4da1aefc2e912a00") (Just "") Nothing,PTag (ValidXOnlyPubKey "70042154fcb25bcee0a7c1027a350b75047a098d50045111280e2e6e9d6a7cf20c4f0d10e7ed1518b35252c5b27afd526e5f96546b58c843ee8e97b2b516e3c4") (Just "") Nothing,PTag (ValidXOnlyPubKey "72b445dc3ddce3243d505fb66ea48ced1030ec823a728508fb302788e7aac014bef2b74fdb4a509710d1cb949cfc27aefc243d15e581660e4daf639d908f6c00") (Just "") Nothing,PTag (ValidXOnlyPubKey "76f6d4a4c6fec624ba52b06a24242454a2965fb3cb7adf0c42304213d4f33df06cb359391fefacab84a756d3ba73bdefa5fb672fde8c28dd158c45aef6093e75") (Just "") Nothing,PTag (ValidXOnlyPubKey "7addd8890701a5b5690d7b94a82adc1f2543fa0d0a9a01ce69857d2b2a57aa59eafbb1a4f06c59882adada2af7adfedb15e09a19551c6808485527b85b24b2a4") (Just "") Nothing,PTag (ValidXOnlyPubKey "84b4e3cee8d423d26f902a54899de2adab904ae52dd24c5bb3a125987b6b2debd643274145a7b4490acb53df23efc18ecadc79aa610783a0b7ba5982701f0220") (Just "") Nothing,PTag (ValidXOnlyPubKey "9708b78c57ef5d0ddfbda0a4eae8d283e3d33f570ec154df350bd17257d26fbe20a5a52ca0ae21080b8305a5414973b2fe54d6c1d77ccdb9ded782a8d970a7e1") (Just "") Nothing,PTag (ValidXOnlyPubKey "98764070a338885bc213568dbef80d3a634b2215e0329f5ee3b81916f332dd764a045eb803b7491b4e02c39f1403fee9fcfc16f7dff14dbf43b2ad12ac3801e7") (Just "") Nothing,PTag (ValidXOnlyPubKey "9986d19f6f0f91cec646c9d88ee489f61d140c79a36415c88d35950127225f34465ff00056be1f98772a1170e541b309eddf9c0a143f0f5c51b6c79d35e220ef") (Just "") Nothing,PTag (ValidXOnlyPubKey "9bfbd7607e3fbcd92a5d49087fd1ee7b47f11c8e74e12a28395eed1c900965e5da2751030bc23dbcd2e588bdc14906284418e5c7b89e5f6205eb3935706e60ca") (Just "") Nothing,PTag (ValidXOnlyPubKey "9e83d5f691c28ecd3a1772c282a2efd3f93d9df5673b0c9fe406216824024ce62a71d82287e5769d7878fcda8dc3f90cbfa4e65cd71dc4f7ac8d182f23347472") (Just "") Nothing,PTag (ValidXOnlyPubKey "9fd7238da2b85b96e6a017e71842e1b93eac28a372d0b893c8da43d14902054e2cc6c87c2a5d1eb657d72859e84ce0f27d45f8e06deeac0214ee2c5c07ea7bae") (Just "") Nothing,PTag (ValidXOnlyPubKey "a2e6fbfba8d2f9094af49e5bf14a07cf61d9aa90eff1a72bcdab6e2b881f34823890022ac46c77c3cf8f56ed466b707ca0346d00cde487141aa0f02d17397611") (Just "") Nothing,PTag (ValidXOnlyPubKey "a2f08e6a7940c3c06d958c32ee0c1ee7738b94cf524fc65bdc723afbdc045b977e3189c72ab86512dda1cdc7616e3a3b82173f966f6d53d13c86efd0f71a9256") (Just "") Nothing,PTag (ValidXOnlyPubKey "b16d2c1e06b3e00a7539a3e94d6188a98326edbe280b932a96852091e802ea8eecdf1dd4d762fa3d9b33165eedc0cb0842b7a08b08568abb84eaf30f59acdc7a") (Just "") Nothing,PTag (ValidXOnlyPubKey "bdf6336ef23432300a50ddba0969dd79eb8efdc4f094f0ae56c50619ec88c4a342d417c5dd71fdd38f8751d4ee6e8717c06906ccf0e4d67ab571b8f342b66aa0") (Just "") Nothing,PTag (ValidXOnlyPubKey "bf394bde43852fc165bc7167cef8ceb838ee6cdb571d426461f75326be1f83c15e2c91d34176d20f3e8e0d3ab3844b4a5eba34f84425de0c2179ffcccee056c0") (Just "") Nothing,PTag (ValidXOnlyPubKey "cdd506541f0912d5767482019f34a4ddda2a20e236745445987bd25b33eef3ddaab058c306fbd4a570d53e7cae082edcdb23d4ffe274c122e7ca842c6280aab5") (Just "") Nothing,PTag (ValidXOnlyPubKey "d1eb80dcd6bef6dcafc533bdba18ae567bfd4c1b95acbcaa26ee3486a7c40fa824d513c90f516f765da1a9414bad20f8b20b046e86542557f22cb729bbef8d24") (Just "") Nothing,PTag (ValidXOnlyPubKey "d20986ae60923a3775dbc691d4db8abab053e85f554e9c6086ea4711808b14b9401c4c97d3dacd1903a2331c4db4484ff0e20448df895725d6e2846b2186727e") (Just "") Nothing,PTag (ValidXOnlyPubKey "d4f0d7cb82861024b5db121471a7becb517d0b25d6d8559b71654e664205d7f5fe972f278ac95b938f4a943fcd359fe0cb7185b96cba33601a006860d378a89a") (Just "") Nothing,PTag (ValidXOnlyPubKey "d7447847ee2ba387142511ced211f3ebc374e12cfa18ebb9aba4098c6bbe2ddd16dd663cf8941c5b68b49fbc8292f6bb9ad82044a2f2262e931a8414547b6788") (Just "") Nothing,PTag (ValidXOnlyPubKey "d827411395f8a6c46d821ad298ffc51dcc582d3e4b557bb35d8b9d6b31e2078c5cabed9778fb041ffc01a6fc04c688621cbaf0e0244056dc7291372fecbc4332") (Just "") Nothing,PTag (ValidXOnlyPubKey "d8ce3d5d161311d1b2941af153e3d436e0f9d7233a58e34c663c0fc59e2a77ee1c0b64cf36ef443c3f575a75883b13b1e56cea2e3b7ccff4673bdcece89def3a") (Just "") Nothing,PTag (ValidXOnlyPubKey "dbf39e83fb0d7e957fa12f52d6d4b68ed21b1aea4b7b9b28f0280836ad8dbfe7229fd23c39805a3030b0e36c239c119ccd8ecd847be419f3f175eb8573e7c1ec") (Just "") Nothing,PTag (ValidXOnlyPubKey "dc6d831be225b300e3473c20f14889efe34b0202f9f4f63e03d1200dab0d6e0e8a9b2e42f4940453692435c6177480bd47b446b698d58ce143f243b7bee5349a") (Just "") Nothing,PTag (ValidXOnlyPubKey "e797e62e818cfcbf6374a5fea3464e7ab2716ecc371efa093bb87bbf3a892d38bedcd77c3d17f821ff39d1a99789c6707086d3197392df615db755770905f865") (Just "") Nothing,PTag (ValidXOnlyPubKey "ec4d1a2f53fdcea635fdbd7c4abde19c2ca43b4b9a81c7e377ef494c3376ca97d8c4de5bdd3722005742874d6f017626696076b32549bd87fd180201c1c7b715") (Just "") Nothing], content' = ""}
-- Variable not in scope: unsigned :: UnsignedEvent

-- >>> unsigned

-- UnsignedEvent {pubKey' = "b0d8bd1e0f441f73f7779811f0cf48f9ea6a295e3a697b8efd2a8f435fcdaf65", created_at' = 2024-08-24 18:49:00.544553597 UTC, kind' = Contacts, tags' = [PTag (ValidXOnlyPubKey "0ef39551950e1c856c111be30ace13b519817de543008f119426e98388acaa02aae3067d522f550cc2e9226a79d21d408a348939be2bbf72bbd43b4ca45f046a") (Just "") Nothing,PTag (ValidXOnlyPubKey "11a4f624cd05b912c77e0298f94fac713e3ef2893cfe33da16f3b348010ac71bbca873ca5955daa0371c23160ac06d422cfb475d59f0b6ec8b8c6f58fd837c78") (Just "") Nothing,PTag (ValidXOnlyPubKey "1206252fb3d92b31bfec419dce569a27c3eb0adfc2c5a3e52978987bb5556cf64ee9aa910d17acecdc1789b84a907960bd0e38877f01c402003d54cd8ae103e6") (Just "") Nothing,PTag (ValidXOnlyPubKey "1650a4d23f48e76503a73379bd505db73d3261107c58eeb8c07402effbdd0d6df287cba23e8270eb259fce31403b6ffca73a35c82860a407a34f6ebe255f64de") (Just "") Nothing,PTag (ValidXOnlyPubKey "1d84d002b5ae425c1bfbc30d75e9eb0f5c7913bbe892de19f827709d5657f475aaed32a23af27bede5620b0274f6c7205eeeb84a59912ad415af0c4adc657e2b") (Just "") Nothing,PTag (ValidXOnlyPubKey "215d5f33ec44c3affd7cc3c9ab9f5c2a3b91d53335b0d8cb8003c8fb02da728f8afea068d0436401dda33f8095eed7bb8c46e0affa7eefd70bcc71da9f3ab2a2") (Just "") Nothing,PTag (ValidXOnlyPubKey "21bdd99d56b253bce7e13542f95b95fb5ff3d3268c7b38354ce724e62032655e961fb2b0a63e5e6c0a9081d4ec08e07907195dbf616025838c496370aafd106f") (Just "") Nothing,PTag (ValidXOnlyPubKey "2ab3580bca249cee5a2e4569c3529b379ca482621b3c958b3b8c9bb3cd0592c6ec38e4c4d7622ed0639d9521953deb73e862056115a280232052eb8b1771773b") (Just "") Nothing,PTag (ValidXOnlyPubKey "31815d68cbbac4edd63f555ba3e994c74e7ff47f7a117c4a9afd21522ad8fb506c1e0fa0c8ef337194fc0837b6a1eabf40d9149f970fb99ee453d33fd51ccadd") (Just "") Nothing,PTag (ValidXOnlyPubKey "32e8aec76ee1c3a074dc6498f61bce11d38118006b45ae0635d4440db3f81330a8582e835a9f5b26f4eebf52e21950021ac026c119e483f9dfcffe21f5ad72d4") (Just "") Nothing,PTag (ValidXOnlyPubKey "33d98b02e918783d42b8c12f44e14e51c34e41d6aac6064b76b7e52fa3b03a1a466489949b21eed4472f3f0871960ffb3c80779ecb2babdeda41ef91f2e8c40c") (Just "") Nothing,PTag (ValidXOnlyPubKey "40770bc9e3dc00a01078e3dbc84f7b9e19e5448fc5481fc853b11848a3e2d36a225b229cc9d40b1d642118db65a4d1cea10a7aaab924c95594a3b20d3a453b25") (Just "") Nothing,PTag (ValidXOnlyPubKey "413d2df91e0ed2e76a827a523371507642576bab0a5bab2d6524cba1a2d4379b007b9f13a4d4bf5cc1d92236425307db3d1ecd7c699d59ac7614681a49dfe763") (Just "") Nothing,PTag (ValidXOnlyPubKey "4c2300bf30bb4568754968b5fe9605e04c00bf61cd7d0a524a706850ddf527dae4d46c8dd566fc58466474a259789da9153c70775536a56d9c4d76a9c83e95a4") (Just "") Nothing,PTag (ValidXOnlyPubKey "528f0158aef50c1f77446a24b7909b7b2a6ab287aee7167ef082b2dbd74b98fa786fc01c4ed95fa792ffb8697c6304870bd2c8f955d5b75f8c4ceda6a46182da") (Just "") Nothing,PTag (ValidXOnlyPubKey "56a557120cf5a4daab71ed61615fd692bb327f92aaa20256f19a9934cb11e01aea7546caf76310fd490882ba7d9f8d5bf3045fbfccb1f574050f7c2f2809cad3") (Just "") Nothing,PTag (ValidXOnlyPubKey "57104462e02bb1ab74e22c7b28b3186d654b37de4ea8d02b58aa726f1426d9e9a69833f2bc8da01a40504bbf01406885e857962671c600bb7fb3076686af3453") (Just "") Nothing,PTag (ValidXOnlyPubKey "5b0fa73b45756900c60486c7fa600641137fb641ccd52ca57006f2b4467c668c9cff23eefb20134639db59c1fdaa16d0aa133fffc71f183a0d63b621bbe80cde") (Just "") Nothing,PTag (ValidXOnlyPubKey "5c0685ef928ced1232dcdc602f976d17b3223d2df2d1522b83a7fd82e6250c4608e913be4001643b1bc5ae04d764d6e4877961512c17385389c912159fe4d441") (Just "") Nothing,PTag (ValidXOnlyPubKey "61bdf0f92fc9382efe656caf628691e30954e6423e62d17d9cf83ba07470abcb3aa73b140772efb4ac9b6018c67f7c73f01eb8da4fd9270e3ad19bcc6bc8bd25") (Just "") Nothing,PTag (ValidXOnlyPubKey "62cd614e0b6be2865023878cfb3f7356f1b4fb9a774b24b164a3307c7bee30d8c2606a3e1d96c349a55d094ec70e34704e7171d3796af5337a30c3da3df1d8f8") (Just "") Nothing,PTag (ValidXOnlyPubKey "645c64748d241433fc20738fbfd250a1d6656edaa083eac369dfba73b84f152704b267c545e2fa674be691d4e4ac05d66f869192482cab331dc8472bdb8f8f0e") (Just "") Nothing,PTag (ValidXOnlyPubKey "66d6c984bc052d88649c7a0439df411dfbee16a53712527ac7542e7add000000aa377948af65520de0de33f85fd1f2b3eb73a5fcda41c6db2a399a1f27cfaadd") (Just "") Nothing,PTag (ValidXOnlyPubKey "6ecc417859bb399ec6ea3b8c87f9fd4d3b142d7a8a01122cbfecb6c420a99d6bdcbb3fd99f654b213c95f2b50e15b07b0f57b681e74d6b7e4da1aefc2e912a00") (Just "") Nothing,PTag (ValidXOnlyPubKey "70042154fcb25bcee0a7c1027a350b75047a098d50045111280e2e6e9d6a7cf20c4f0d10e7ed1518b35252c5b27afd526e5f96546b58c843ee8e97b2b516e3c4") (Just "") Nothing,PTag (ValidXOnlyPubKey "72b445dc3ddce3243d505fb66ea48ced1030ec823a728508fb302788e7aac014bef2b74fdb4a509710d1cb949cfc27aefc243d15e581660e4daf639d908f6c00") (Just "") Nothing,PTag (ValidXOnlyPubKey "76f6d4a4c6fec624ba52b06a24242454a2965fb3cb7adf0c42304213d4f33df06cb359391fefacab84a756d3ba73bdefa5fb672fde8c28dd158c45aef6093e75") (Just "") Nothing,PTag (ValidXOnlyPubKey "7addd8890701a5b5690d7b94a82adc1f2543fa0d0a9a01ce69857d2b2a57aa59eafbb1a4f06c59882adada2af7adfedb15e09a19551c6808485527b85b24b2a4") (Just "") Nothing,PTag (ValidXOnlyPubKey "84b4e3cee8d423d26f902a54899de2adab904ae52dd24c5bb3a125987b6b2debd643274145a7b4490acb53df23efc18ecadc79aa610783a0b7ba5982701f0220") (Just "") Nothing,PTag (ValidXOnlyPubKey "9708b78c57ef5d0ddfbda0a4eae8d283e3d33f570ec154df350bd17257d26fbe20a5a52ca0ae21080b8305a5414973b2fe54d6c1d77ccdb9ded782a8d970a7e1") (Just "") Nothing,PTag (ValidXOnlyPubKey "98764070a338885bc213568dbef80d3a634b2215e0329f5ee3b81916f332dd764a045eb803b7491b4e02c39f1403fee9fcfc16f7dff14dbf43b2ad12ac3801e7") (Just "") Nothing,PTag (ValidXOnlyPubKey "9986d19f6f0f91cec646c9d88ee489f61d140c79a36415c88d35950127225f34465ff00056be1f98772a1170e541b309eddf9c0a143f0f5c51b6c79d35e220ef") (Just "") Nothing,PTag (ValidXOnlyPubKey "9bfbd7607e3fbcd92a5d49087fd1ee7b47f11c8e74e12a28395eed1c900965e5da2751030bc23dbcd2e588bdc14906284418e5c7b89e5f6205eb3935706e60ca") (Just "") Nothing,PTag (ValidXOnlyPubKey "9e83d5f691c28ecd3a1772c282a2efd3f93d9df5673b0c9fe406216824024ce62a71d82287e5769d7878fcda8dc3f90cbfa4e65cd71dc4f7ac8d182f23347472") (Just "") Nothing,PTag (ValidXOnlyPubKey "9fd7238da2b85b96e6a017e71842e1b93eac28a372d0b893c8da43d14902054e2cc6c87c2a5d1eb657d72859e84ce0f27d45f8e06deeac0214ee2c5c07ea7bae") (Just "") Nothing,PTag (ValidXOnlyPubKey "a2e6fbfba8d2f9094af49e5bf14a07cf61d9aa90eff1a72bcdab6e2b881f34823890022ac46c77c3cf8f56ed466b707ca0346d00cde487141aa0f02d17397611") (Just "") Nothing,PTag (ValidXOnlyPubKey "a2f08e6a7940c3c06d958c32ee0c1ee7738b94cf524fc65bdc723afbdc045b977e3189c72ab86512dda1cdc7616e3a3b82173f966f6d53d13c86efd0f71a9256") (Just "") Nothing,PTag (ValidXOnlyPubKey "b16d2c1e06b3e00a7539a3e94d6188a98326edbe280b932a96852091e802ea8eecdf1dd4d762fa3d9b33165eedc0cb0842b7a08b08568abb84eaf30f59acdc7a") (Just "") Nothing,PTag (ValidXOnlyPubKey "bdf6336ef23432300a50ddba0969dd79eb8efdc4f094f0ae56c50619ec88c4a342d417c5dd71fdd38f8751d4ee6e8717c06906ccf0e4d67ab571b8f342b66aa0") (Just "") Nothing,PTag (ValidXOnlyPubKey "bf394bde43852fc165bc7167cef8ceb838ee6cdb571d426461f75326be1f83c15e2c91d34176d20f3e8e0d3ab3844b4a5eba34f84425de0c2179ffcccee056c0") (Just "") Nothing,PTag (ValidXOnlyPubKey "cdd506541f0912d5767482019f34a4ddda2a20e236745445987bd25b33eef3ddaab058c306fbd4a570d53e7cae082edcdb23d4ffe274c122e7ca842c6280aab5") (Just "") Nothing,PTag (ValidXOnlyPubKey "d1eb80dcd6bef6dcafc533bdba18ae567bfd4c1b95acbcaa26ee3486a7c40fa824d513c90f516f765da1a9414bad20f8b20b046e86542557f22cb729bbef8d24") (Just "") Nothing,PTag (ValidXOnlyPubKey "d20986ae60923a3775dbc691d4db8abab053e85f554e9c6086ea4711808b14b9401c4c97d3dacd1903a2331c4db4484ff0e20448df895725d6e2846b2186727e") (Just "") Nothing,PTag (ValidXOnlyPubKey "d4f0d7cb82861024b5db121471a7becb517d0b25d6d8559b71654e664205d7f5fe972f278ac95b938f4a943fcd359fe0cb7185b96cba33601a006860d378a89a") (Just "") Nothing,PTag (ValidXOnlyPubKey "d7447847ee2ba387142511ced211f3ebc374e12cfa18ebb9aba4098c6bbe2ddd16dd663cf8941c5b68b49fbc8292f6bb9ad82044a2f2262e931a8414547b6788") (Just "") Nothing,PTag (ValidXOnlyPubKey "d827411395f8a6c46d821ad298ffc51dcc582d3e4b557bb35d8b9d6b31e2078c5cabed9778fb041ffc01a6fc04c688621cbaf0e0244056dc7291372fecbc4332") (Just "") Nothing,PTag (ValidXOnlyPubKey "d8ce3d5d161311d1b2941af153e3d436e0f9d7233a58e34c663c0fc59e2a77ee1c0b64cf36ef443c3f575a75883b13b1e56cea2e3b7ccff4673bdcece89def3a") (Just "") Nothing,PTag (ValidXOnlyPubKey "dbf39e83fb0d7e957fa12f52d6d4b68ed21b1aea4b7b9b28f0280836ad8dbfe7229fd23c39805a3030b0e36c239c119ccd8ecd847be419f3f175eb8573e7c1ec") (Just "") Nothing,PTag (ValidXOnlyPubKey "dc6d831be225b300e3473c20f14889efe34b0202f9f4f63e03d1200dab0d6e0e8a9b2e42f4940453692435c6177480bd47b446b698d58ce143f243b7bee5349a") (Just "") Nothing,PTag (ValidXOnlyPubKey "e797e62e818cfcbf6374a5fea3464e7ab2716ecc371efa093bb87bbf3a892d38bedcd77c3d17f821ff39d1a99789c6707086d3197392df615db755770905f865") (Just "") Nothing,PTag (ValidXOnlyPubKey "ec4d1a2f53fdcea635fdbd7c4abde19c2ca43b4b9a81c7e377ef494c3376ca97d8c4de5bdd3722005742874d6f017626696076b32549bd87fd180201c1c7b715") (Just "") Nothing], content' = ""}

saveContacts :: Keys -> [(XOnlyPubKey, Maybe Username)] -> NostrNetworkT ()
saveContacts (Keys sk xo _) contacts = do
  now <- liftIO getCurrentTime
  let unsigned = setContacts contacts xo now
  case signEvent unsigned sk xo of 
    Just signed -> send . SendEvent $ signed
    Nothing -> liftIO . logError $ "Failed signing event!"


tempKeys = generateKeys
tempSecKey = "ac5ebf6e729b89bdcbaf905945d63809e400a60c4159077679a2b1da8488d0ef"
tempXoKey = "3c8b35aa58e20514abe909a6b8a82476460f6a3ed091be287ddc7231b2f03f10"

xoKey = textToByteStringType tempXoKey parseXOnlyPubKey
sKey = textToByteStringType tempSecKey